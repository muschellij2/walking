% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/verisense_count_steps.R
\name{verisense_count_steps}
\alias{verisense_count_steps}
\alias{verisense_count_steps_revised}
\title{Count Steps According to Gu et al, 2017 Method}
\usage{
verisense_count_steps(
  data,
  sample_rate,
  k = 3,
  periodicity_range = c(5, 15),
  similarity_threshold = -0.5,
  continuity_window_size = 4,
  continuity_threshold = 4,
  variance_threshold = 0.001,
  vm_threshold = 1.2,
  peak_finder = c("fast", "original")
)

verisense_count_steps_revised(
  ...,
  k = 4,
  periodicity_range = c(4, 20),
  similarity_threshold = -1,
  continuity_window_size = 4,
  continuity_threshold = 4,
  variance_threshold = 0.01,
  vm_threshold = 1.25
)
}
\arguments{
\item{data}{A \code{data.frame} with a column for time in \code{POSIXct} (usually
\code{HEADER_TIMESTAMP}, not required), and \code{X}, \code{Y}, \code{Z}}

\item{sample_rate}{sampling frequency of the input data}

\item{k}{window size for controlling peak finding.}

\item{periodicity_range}{a length-2 vector of the range of periodicity.
These are integers that represent \strong{samples} not seconds.}

\item{similarity_threshold}{threshold (in g) for similarity between
magnitude of peaks}

\item{continuity_window_size}{Window size for continuity}

\item{continuity_threshold}{Threshold for continuity}

\item{variance_threshold}{Variance threshold for the signal}

\item{vm_threshold}{vector magnitude threshold for a peak to be
called a peak}

\item{peak_finder}{function to find peaks, either the "original"
from the code, or the optimized "fast" version.}

\item{...}{not used, used to passes arguments from
\code{verisense_count_steps_revised} to \code{verisense_count_steps}}
}
\value{
A vector of length \code{round(nrow(input_data) / sample_rate)} of the
estimated steps, where the data is rounded to seconds
}
\description{
This method is based off finding peaks in the summed and squared acceleration signal
and then using multiple thresholds to determine if each peak is a step or an artifact.
An additional magnitude threshold was added to the algorithm to prevent false positives
in free living data.
}
\note{
the \verb{_revised} version is the same algorithm with different defaults
for the parameters as based on \url{doi:10.3390/s22249984}.
}
\examples{
input_data <- matrix(runif(500 * 3, min = -1.5, max = 1.5), ncol = 3)
verisense_count_steps(input_data, sample_rate = 15L)
verisense_count_steps(input_data, sample_rate = 15L, peak_finder = "fast")
acc = sqrt(rowSums(input_data^2))
verisense_count_steps(acc, sample_rate = 15L, peak_finder = "fast")
}
\author{
Matthew R Patterson \href{mailto:mpatterson@shimmersensing.com}{mpatterson@shimmersensing.com}
}
